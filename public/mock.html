<head>

  <script src="oauth2_login.js"></script>
  <script async defer src="https://apis.google.com/js/api.js" onLoad="gapi_onload()"></script>
  <script src="https://accounts.google.com/gsi/client" onload="initTokenClient('none')" async defer></script>
  <script src="app.js"></script>
  <script src="sheetsAPI.js"></script>
  <script src="visitFinanceInput.js"></script>
  <script src="visitObjectives.js"></script>
  <script src="visitFinance.js"></script>
  <script src="component_caller.js"></script>

  <style>
    img {
      border-radius: 10px;
    }

    .default_table {
      border-collapse: collapse;
      width: 100%
    }

    .default_table td {
      border: 1px solid gray;
      padding: 10px;
    }

    .default_table th {
      border: 1px solid gray;
      font-weight: 200;

    }

    @font-face {
      font-family: 'MyWebFont';
      src: url('oita_regular.ttf')
    }

    body {
      font-family: "MyWebFont", "Times New Roman";
    }
  </style>

</head>

<body>
  <h1>
    <button onclick="loadRecipes1()">load</button>

  </h1>

  <div style="width: 40%; float:left">
    <table id="recipes_table1" class="default_table"></table>

  </div>

  <div style="width: 60%; float:left">

    <p id="recipes_ingredients">
      x

    </p>

    <p id="recipes_text">
      y

    </p>

  </div>



</body>

<script>
  window.onload = init;

  function init() {
    myTimeout = setTimeout(loadRecipes1, 1000);
  }
  clean_data = []

  function loadRecipes1() {
    sheetsAPI_getValues("GET_recipes_list2", renderRecipes1)
  }

  function renderRecipes1(data) {

    clickable = true; 

    for (let i = 1; i < data.length; i++) {
      clean_data.push({
        "name": data[i][0],
        "img_url": data[i][1],
        "url": data[i][2],
        "ingredients": data[i][3],
        "text": data[i][4],
      })
    }

    for (let i = 0; i < clean_data.length; i++) {

      table1 = document.getElementById("recipes_table1");
      recipes_add_row([
        '<img src=' + clean_data[i].img_url + ' width="100" height="100" object-fit: cover>',
        clean_data[i].name,
        '<div><a href="' + clean_data[i].img_url + '">' + "Link" + '</a></div>',
        `<div><button onclick=recipes_display_stats(${i}) ${clean_data[i].ingredients != undefined ? 'enabled' : 'disabled'} >Show</button></div>`
        
      ])

    }

  }
  function recipes_display_stats(index) {
    console.log(clean_data[index])
    document.getElementById("recipes_ingredients").innerText = clean_data[index].ingredients
    document.getElementById("recipes_text").innerText = clean_data[index].text
   
  }

  function recipes_add_row(data) {
    var row = table1.insertRow()

    for (let i = 0; i < data.length; i++) {
      x = row.insertCell(i);
      x.innerHTML = data[i]
    }
  }
</script>